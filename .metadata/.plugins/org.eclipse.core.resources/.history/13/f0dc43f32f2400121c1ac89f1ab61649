package com.example.weryu;

import android.os.Bundle;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

public class MainActivity extends MapActivity {

    @Override
    public void onCreate(Bundle savedInstanceData) {
        super.onCreate(savedInstanceData);
        setContentView(R.layout.activity_main);
        

        
        //MapView mapView = (MapView) findViewById(R.id.mapview);
        //mapView.setBuiltInZoomControls(true);
        
        final MapView cMapView = (MapView) findViewById(R.id.mapview);
        cMapView.setBuiltInZoomControls(true);
        
     // Получаем MapController
     MapController cMapController = cMapView.getMapController();

     // Включаем элементы интерфейса, контролирующие зум
     cMapView.setBuiltInZoomControls(true);

     // Создаём менеджер местоположения и "слушателя"
     final LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
     final LocationListener locationListener = new LocationListener() {
             
         @Override
         public void onStatusChanged(String provider, int status, Bundle extras) {}
                 
         @Override
         public void onProviderEnabled(String provider) {}
                 
         @Override
         public void onProviderDisabled(String provider) {}
                 
         @Override
         public void onLocationChanged(Location location) {}
     };
     locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

     // создаём overlay для отображения своей позиции
     cMyLocationOverlay = new MyLocationOverlay(this, cMapView);
     cMyLocationOverlay.disableCompass();
     cMyLocationOverlay.enableMyLocation();
     cMapView.getOverlays().add(cMyLocationOverlay);
      
     // зум
     cMapController.setZoomCurrent(15);

     // Получаем свои координаты (можно использовать LocationManager.NETWORK_PROVIDER, для иного способа определения позиции)
     Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

     // Перемещаем карту на заданные координаты
     cMapController.animateTo(new GeoPoint((int) location.getLatitude() * 1000000, (int) location.getLongitude() * 1000000));
        
    }
    
    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
}